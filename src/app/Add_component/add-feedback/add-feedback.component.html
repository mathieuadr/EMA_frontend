<div class="mb-5">
  <div>
    <h1 class="text-center">New Feedback</h1>
  </div>

  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="container">
      <div class="row mb-3">
        <div class="col-md-12">
          <div class="form-group">
            <label for="description" class="form-label">Description:</label>
            <textarea class="form-control" id="description" formControlName="description" rows="3" required 
                      [class.is-invalid]="description.invalid && description.touched"
                      [class.is-valid]="description.valid && description.touched"></textarea>
            <div *ngIf="description.invalid && description.touched" class="invalid-feedback">
              <div *ngIf="description.errors?.['required']">Required</div>
              <div *ngIf="description.errors?.['maxlength']">Content should be 200 characters or less</div>
            </div>
          </div>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-12">
          <div class="form-group">
            <label class="form-label">Rating:</label>
            <div class="rating">
              <i class="bi bi-star-fill" [ngClass]="{'text-warning': ratingValue >= 1}" (click)="setRating(1)"></i>
              <i class="bi bi-star-fill" [ngClass]="{'text-warning': ratingValue >= 2}" (click)="setRating(2)"></i>
              <i class="bi bi-star-fill" [ngClass]="{'text-warning': ratingValue >= 3}" (click)="setRating(3)"></i>
              <i class="bi bi-star-fill" [ngClass]="{'text-warning': ratingValue >= 4}" (click)="setRating(4)"></i>
              <i class="bi bi-star-fill" [ngClass]="{'text-warning': ratingValue >= 5}" (click)="setRating(5)"></i>
            </div>
            <input type="number" class="form-control d-none" formControlName="rating" />
            <div *ngIf="rating.invalid && rating.touched" class="invalid-feedback">
              <div *ngIf="rating.errors?.['required']">Required</div>
              <div *ngIf="rating.errors?.['min']">Rating must be at least 1</div>
              <div *ngIf="rating.errors?.['max']">Rating must be at most 5</div>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-12">
          <button type="submit" class="btn btn-primary w-100">Create Feedback</button>
        </div>
      </div>
    </div>
  </form>
</div>
